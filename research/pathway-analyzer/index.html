<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathway Analyzer | Charlie Guthmann</title>
    <style>
        :root {
            --blue: #2563eb;
            --green: #16a34a;
            --purple: #7c3aed;
            --orange: #ea580c;
            --text: #1a1a1a;
            --muted: #6b7280;
            --border: #e5e7eb;
            --bg: #f9fafb;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text);
            background: var(--bg);
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }
        header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }
        h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }
        .subtitle {
            font-size: 1.25rem;
            color: var(--muted);
            max-width: 700px;
        }
        .breadcrumb {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--muted);
        }
        .breadcrumb a { color: var(--blue); text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }

        /* Hero Stats */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        .hero-stat {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            text-align: center;
        }
        .hero-stat .value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--blue);
            line-height: 1;
        }
        .hero-stat .label {
            font-size: 0.85rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.5rem;
        }
        .hero-stat:nth-child(2) .value { color: var(--green); }
        .hero-stat:nth-child(3) .value { color: var(--purple); }
        .hero-stat:nth-child(4) .value { color: var(--orange); }

        /* Section */
        section {
            margin-bottom: 4rem;
        }
        h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }

        /* Details Dropdowns */
        details {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            margin-bottom: 1rem;
            overflow: hidden;
        }
        summary {
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        summary:hover { background: var(--bg); }
        summary::marker { color: var(--blue); }
        details[open] summary { border-bottom: 1px solid var(--border); }
        .detail-content {
            padding: 1.5rem;
        }
        .detail-content p { margin-bottom: 0.75rem; }

        /* Distribution Grid */
        .dist-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-top: 1rem;
        }
        .dist-card h4 {
            font-size: 1rem;
            margin-bottom: 1rem;
            color: var(--muted);
        }
        .dist-bar {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .dist-label {
            width: 120px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .dist-track {
            flex: 1;
            height: 24px;
            background: var(--bg);
            border-radius: 4px;
            overflow: hidden;
            margin: 0 1rem;
        }
        .dist-fill {
            height: 100%;
            background: var(--blue);
            border-radius: 4px;
        }
        .dist-pct {
            width: 50px;
            text-align: right;
            font-size: 0.85rem;
            color: var(--muted);
        }

        /* Top Pathways */
        .pathway-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        .pathway-chip {
            background: var(--bg);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        .pathway-chip .count {
            font-weight: 700;
            color: var(--blue);
        }

        /* Audit Container */
        .audit-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        .audit-nav {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            background: var(--bg);
        }
        .audit-nav-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .audit-nav-btn:hover {
            border-color: var(--blue);
            color: var(--blue);
        }
        .audit-nav-btn.active {
            background: var(--blue);
            border-color: var(--blue);
            color: white;
        }
        .audit-slide {
            display: none;
        }
        .audit-slide.active {
            display: block;
        }

        /* Audit Cards */
        .audit-card {
            overflow: hidden;
        }
        .audit-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .audit-header h3 {
            font-size: 1.25rem;
            font-weight: 700;
        }
        .pathway-badge {
            background: var(--blue);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .audit-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            padding: 2rem;
        }
        .audit-image img {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .audit-meta .description {
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        .audit-meta .related {
            font-size: 0.85rem;
            color: var(--muted);
            margin-bottom: 1rem;
        }
        .counts {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .count-badge {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .count-badge.nodes { background: #dbeafe; color: #1e40af; }
        .count-badge.edges { background: #dcfce7; color: #166534; }

        /* Data Tables in Audit - now in sidebar */
        .audit-meta .data-table {
            margin: 0.5rem 0;
            border-radius: 8px;
            box-shadow: none;
            border: 1px solid var(--border);
        }
        .audit-meta .data-table summary {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
        }
        .table-scroll {
            overflow-x: auto;
            max-height: 300px;
            overflow-y: auto;
        }
        .audit-meta .table-scroll {
            padding: 0 0.75rem 1rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }
        th, td {
            padding: 0.5rem 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--bg);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
            color: var(--muted);
            position: sticky;
            top: 0;
        }
        tbody tr:hover { background: var(--bg); }

        /* Footer */
        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 2px solid var(--border);
            color: var(--muted);
        }
        footer a { color: var(--blue); text-decoration: none; }

        /* Responsive */
        @media (max-width: 1200px) {
            .hero-stats { grid-template-columns: repeat(3, 1fr); }
            .pathway-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 800px) {
            .container { padding: 2rem 1rem; }
            h1 { font-size: 2rem; }
            .hero-stats { grid-template-columns: repeat(2, 1fr); }
            .audit-content { grid-template-columns: 1fr; }
            .dist-grid { grid-template-columns: 1fr; }
            .pathway-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Medical Pathway Analyzer</h1>
            <p class="subtitle">Automated extraction of gene/protein interaction networks from 49k pathway diagrams using Gemini 3 Pro</p>
            <nav class="breadcrumb">
                <a href="/">Home</a> / <a href="/research">Research</a> / Pathway Analyzer
                <span style="margin-left: 2rem;">|</span>
                <a href="cluster-dashboard.html" style="margin-left: 1rem; background: #4CAF50; color: white; padding: 4px 12px; border-radius: 4px; font-size: 0.85rem;">Cluster Dashboard</a>
            </nav>
        </header>

        <!-- Hero Stats -->
        <div class="hero-stats">
            <div class="hero-stat">
                <div class="value">48,779</div>
                <div class="label">Images</div>
            </div>
            <div class="hero-stat">
                <div class="value">1.33M</div>
                <div class="label">Nodes</div>
            </div>
            <div class="hero-stat">
                <div class="value">1.38M</div>
                <div class="label">Edges</div>
            </div>
            <div class="hero-stat">
                <div class="value">8,821</div>
                <div class="label">Pathways</div>
            </div>
            <div class="hero-stat">
                <div class="value">42,402</div>
                <div class="label">PMC Papers</div>
            </div>
            <div class="hero-stat">
                <div class="value">99.6%</div>
                <div class="label">Success</div>
            </div>
        </div>

        <!-- Methodology -->
        <section>
            <h2>Methodology</h2>

            <details>
                <summary>Prompt (v2)</summary>
                <div class="detail-content">
                    <pre style="background:#f3f4f6;padding:1rem;border-radius:8px;font-size:0.85rem;overflow-x:auto;white-space:pre-wrap;">You are an expert bioinformatician specializing in pathway analysis.
Extract gene/protein interaction networks from signaling pathway diagrams.

CRITICAL RULES:
1. Map genes to Human Entrez Gene IDs when possible
2. Protein families (Rho, GAP, MAPK) get entrez_id: null, is_family_representative: true
3. Phenotypes/outcomes (Cell scattering, APOPTOSIS, G1 Phase) get node_type: "phenotype"
4. Identify small molecules, drugs, inhibitors, or metabolites (e.g., 'PD98059', 'ATP', 'Calcium', 'Wortmannin') as node_type: "chemical". Do not exclude them. Do not assign Entrez IDs to chemicals.
5. Ensure biological processes (e.g., 'Cell Cycle', 'G1 Phase', 'Apoptosis') are strictly labeled as 'phenotype' to distinguish them from molecular entities.
6. Dashed lines or "?" marks → uncertain: true
7. Detect if the pathway diagram contains any question marks (?) and set has_question_marks accordingly
8. Identify the overall pathway/biological process shown in the diagram and provide a brief description
9. Identify the PRIMARY canonical pathway shown. Use standard names like: "PI3K-AKT signaling", "MAPK/ERK signaling", "Wnt/beta-catenin signaling", "NF-kB signaling", "TGF-beta signaling", "JAK-STAT signaling", "Notch signaling", "Hedgehog signaling", "p53 signaling", "Apoptosis", "Autophagy", "Cell cycle", "mTOR signaling", "AMPK signaling", "Hippo signaling", "TNF signaling", "Toll-like receptor signaling", "Insulin signaling", "VEGF signaling", "Calcium signaling", etc. If the pathway doesn't match a canonical name, provide the most descriptive name possible.
10. Output ONLY valid JSON with no extra text

Return this exact JSON structure:
{
  "figure_metadata": {
    "has_question_marks": boolean,
    "pathway_description": "string (1-2 sentence description)",
    "canonical_pathway": "string (primary pathway name, e.g. 'PI3K-AKT signaling')",
    "related_pathways": ["string (other pathways shown or connected)"]
  },
  "nodes": [
    {
      "label": "string",
      "node_type": "gene|phenotype|complex|chemical|other",
      "entrez_id": integer|null,
      "is_family_representative": boolean,
      "notes": "string"
    }
  ],
  "edges": [
    {
      "source": "string",
      "target": "string",
      "interaction": "activation|inhibition|binding|indirect",
      "uncertain": boolean
    }
  ]
}</pre>
                </div>
            </details>

            <details>
                <summary>Example JSON Output</summary>
                <div class="detail-content">
                    <pre style="background:#f3f4f6;padding:1rem;border-radius:8px;font-size:0.85rem;overflow-x:auto;white-space:pre-wrap;">{
  "figure_metadata": {
    "has_question_marks": false,
    "pathway_description": "A schematic of the cell cycle highlighting the G1 phase sub-stages (G1-pm and G1-ps). It illustrates a signaling network where ERK and YAP1 in the post-mitotic G1 phase activate PI3K and Beta-catenin in the pre-synthesis G1 phase to drive cell cycle progression.",
    "canonical_pathway": "Cell cycle",
    "related_pathways": ["MAPK/ERK signaling", "Hippo signaling", "PI3K-AKT signaling", "Wnt/beta-catenin signaling"]
  },
  "nodes": [
    {"label": "YAP1", "node_type": "gene", "entrez_id": 10413, "is_family_representative": false, "notes": ""},
    {"label": "ERK", "node_type": "gene", "entrez_id": null, "is_family_representative": true, "notes": "MAPK family"},
    {"label": "PI3K", "node_type": "complex", "entrez_id": null, "is_family_representative": true, "notes": ""},
    {"label": "beta-catenin", "node_type": "gene", "entrez_id": 1499, "is_family_representative": false, "notes": "CTNNB1"},
    {"label": "G0", "node_type": "phenotype", "entrez_id": null, "is_family_representative": false, "notes": "Quiescence"},
    {"label": "G1", "node_type": "phenotype", "entrez_id": null, "is_family_representative": false, "notes": "Gap 1 phase"}
  ],
  "edges": [
    {"source": "ERK", "target": "PI3K", "interaction": "activation", "uncertain": false},
    {"source": "YAP1", "target": "beta-catenin", "interaction": "activation", "uncertain": false},
    {"source": "ERK", "target": "beta-catenin", "interaction": "activation", "uncertain": true},
    {"source": "YAP1", "target": "PI3K", "interaction": "activation", "uncertain": true}
  ]
}</pre>
                </div>
            </details>

            <details>
                <summary>Processing Pipeline</summary>
                <div class="detail-content">
                    <p><strong>Source:</strong> 49,014 pathway diagram images from PubMed Central papers stored in Dropbox</p>
                    <p><strong>Model:</strong> Google Gemini 3 Pro Preview via Vertex AI</p>
                    <p><strong>Throughput:</strong> ~120 images/minute with 200 concurrent requests using native async API</p>
                    <p><strong>Resilience:</strong> Auto-resume on failure, 5x retry with exponential backoff, 120s timeout per request</p>
                    <p><strong>Output:</strong> JSONL with nodes, edges, and metadata per image; exported to CSV (154 MB total)</p>
                </div>
            </details>

            <details>
                <summary>Distributions</summary>
                <div class="detail-content">
                    <div class="dist-grid">
                        <div class="dist-card">
                            <h4>Node Types</h4>
                            <div class="dist-bar">
                                <span class="dist-label">gene</span>
                                <div class="dist-track"><div class="dist-fill" style="width:68%;background:#2563eb"></div></div>
                                <span class="dist-pct">68.0%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">chemical</span>
                                <div class="dist-track"><div class="dist-fill" style="width:13.7%;background:#16a34a"></div></div>
                                <span class="dist-pct">13.7%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">phenotype</span>
                                <div class="dist-track"><div class="dist-fill" style="width:11.1%;background:#7c3aed"></div></div>
                                <span class="dist-pct">11.1%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">complex</span>
                                <div class="dist-track"><div class="dist-fill" style="width:4.2%;background:#ea580c"></div></div>
                                <span class="dist-pct">4.2%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">other</span>
                                <div class="dist-track"><div class="dist-fill" style="width:3%;background:#6b7280"></div></div>
                                <span class="dist-pct">3.0%</span>
                            </div>
                        </div>
                        <div class="dist-card">
                            <h4>Edge Types</h4>
                            <div class="dist-bar">
                                <span class="dist-label">activation</span>
                                <div class="dist-track"><div class="dist-fill" style="width:66.7%;background:#2563eb"></div></div>
                                <span class="dist-pct">66.7%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">inhibition</span>
                                <div class="dist-track"><div class="dist-fill" style="width:14.9%;background:#dc2626"></div></div>
                                <span class="dist-pct">14.9%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">binding</span>
                                <div class="dist-track"><div class="dist-fill" style="width:13%;background:#16a34a"></div></div>
                                <span class="dist-pct">13.0%</span>
                            </div>
                            <div class="dist-bar">
                                <span class="dist-label">indirect</span>
                                <div class="dist-track"><div class="dist-fill" style="width:5.2%;background:#7c3aed"></div></div>
                                <span class="dist-pct">5.2%</span>
                            </div>
                            <p style="margin-top:1rem;font-size:0.85rem;color:#6b7280"><strong>7.8%</strong> of edges marked uncertain</p>
                        </div>
                    </div>
                </div>
            </details>

            <details>
                <summary>Top 20 Canonical Pathways</summary>
                <div class="detail-content">
                    <div class="pathway-grid">
                        <div class="pathway-chip"><span class="count">1,783</span> PI3K-AKT signaling</div>
                        <div class="pathway-chip"><span class="count">1,673</span> Wnt/beta-catenin</div>
                        <div class="pathway-chip"><span class="count">1,624</span> Toll-like receptor</div>
                        <div class="pathway-chip"><span class="count">1,355</span> TGF-beta signaling</div>
                        <div class="pathway-chip"><span class="count">1,197</span> mTOR signaling</div>
                        <div class="pathway-chip"><span class="count">1,188</span> JAK-STAT signaling</div>
                        <div class="pathway-chip"><span class="count">971</span> Apoptosis</div>
                        <div class="pathway-chip"><span class="count">955</span> NF-kB signaling</div>
                        <div class="pathway-chip"><span class="count">638</span> MAPK/ERK signaling</div>
                        <div class="pathway-chip"><span class="count">611</span> Hippo signaling</div>
                        <div class="pathway-chip"><span class="count">588</span> Autophagy</div>
                        <div class="pathway-chip"><span class="count">575</span> Hedgehog signaling</div>
                        <div class="pathway-chip"><span class="count">542</span> Unfolded Protein Response</div>
                        <div class="pathway-chip"><span class="count">497</span> Insulin signaling</div>
                        <div class="pathway-chip"><span class="count">478</span> Cell cycle</div>
                        <div class="pathway-chip"><span class="count">452</span> p53 signaling</div>
                        <div class="pathway-chip"><span class="count">406</span> PI3K-AKT-mTOR</div>
                        <div class="pathway-chip"><span class="count">397</span> Notch signaling</div>
                        <div class="pathway-chip"><span class="count">309</span> Central Carbon Metabolism</div>
                        <div class="pathway-chip"><span class="count">300</span> cGAS-STING signaling</div>
                    </div>
                </div>
            </details>
        </section>

        <!-- Random Audit -->
        <section>
            <h2>Audit: Random Samples</h2>
            <p style="color:var(--muted);margin-bottom:2rem;">5 randomly selected images from the 48,779 processed. Compare extracted networks against original diagrams.</p>

            <div class="audit-container" id="random-audit">
                <div class="audit-nav">
                    <button class="audit-nav-btn active" onclick="showSlide('random-audit', 0)">1</button>
                    <button class="audit-nav-btn" onclick="showSlide('random-audit', 1)">2</button>
                    <button class="audit-nav-btn" onclick="showSlide('random-audit', 2)">3</button>
                    <button class="audit-nav-btn" onclick="showSlide('random-audit', 3)">4</button>
                    <button class="audit-nav-btn" onclick="showSlide('random-audit', 4)">5</button>
                </div>

                <div class="audit-slide active">
                    <div class="audit-card">
                        <div class="audit-header">
                            <h3>PMC7823885 — Figure F3</h3>
                            <span class="pathway-badge">Liver metabolic reprogramming and inflammatory signaling</span>
                        </div>
                        <div class="audit-content">
                            <div class="audit-image">
                                <img src="images/PMC7823885__F3.jpg" alt="PMC7823885 F3">
                            </div>
                            <div class="audit-meta">
                                <p class="description">The diagram illustrates metabolic reprogramming in liver cells, characterized by alterations in lipid and cholesterol metabolism, fatty acid oxidation, and glycolysis, coupled with inflammatory signaling pathways mediated by IL-1, MAPK/ERK, and JNK.</p>
                                <p class="related"><strong>Related:</strong> Lipid metabolism; Cholesterol biosynthesis; Fatty acid metabolism</p>
                                <div class="counts">
                                    <span class="count-badge nodes">79 nodes</span>
                                    <span class="count-badge edges">67 edges</span>
                                </div>
                                <details class="data-table">
                                    <summary>Nodes (79)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                            <tbody><tr><td>MCT1/4</td><td>complex</td><td></td><td>Transporter complex</td></tr><tr><td>Acetate</td><td>chemical</td><td></td><td></td></tr><tr><td>Acss2</td><td>gene</td><td>55902</td><td></td></tr><tr><td>Me1</td><td>gene</td><td>4199</td><td></td></tr><tr><td>Acetyl-CoA</td><td>chemical</td><td></td><td></td></tr><tr><td>Acaca</td><td>gene</td><td>31</td><td></td></tr><tr><td>Fasn</td><td>gene</td><td>2194</td><td></td></tr><tr><td>Fdps</td><td>gene</td><td>2224</td><td></td></tr><tr><td>Nsdhl</td><td>gene</td><td>50814</td><td></td></tr><tr><td>Cholesterol</td><td>chemical</td><td></td><td></td></tr><tr><td>Il1a/b</td><td>gene</td><td>3552</td><td>IL1A and IL1B</td></tr><tr><td>ERK</td><td>gene</td><td>5595</td><td>MAPK1/3</td></tr><tr><td>JNK</td><td>gene</td><td>5599</td><td>MAPK8</td></tr><tr><td>Srebp1</td><td>gene</td><td>6720</td><td>SREBF1</td></tr><tr><td>...</td><td colspan="3"><em>+ 65 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                                <details class="data-table">
                                    <summary>Edges (67)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                            <tbody><tr><td>MCT1/4</td><td>Acetate</td><td>activation</td><td></td></tr><tr><td>Acetate</td><td>Acss2</td><td>activation</td><td></td></tr><tr><td>Acss2</td><td>Acetyl-CoA</td><td>activation</td><td></td></tr><tr><td>Il1a/b</td><td>Il1r</td><td>binding</td><td></td></tr><tr><td>Il1r</td><td>ERK</td><td>activation</td><td></td></tr><tr><td>ERK</td><td>SRF</td><td>activation</td><td></td></tr><tr><td>JNK</td><td>Jun</td><td>activation</td><td></td></tr><tr><td>...</td><td colspan="3"><em>+ 60 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audit-slide">
                    <div class="audit-card">
                        <div class="audit-header">
                            <h3>PMC7105607 — Figure F2</h3>
                            <span class="pathway-badge">NF-kB signaling</span>
                        </div>
                        <div class="audit-content">
                            <div class="audit-image">
                                <img src="images/PMC7105607__F2.jpg" alt="PMC7105607 F2">
                            </div>
                            <div class="audit-meta">
                                <p class="description">The diagram illustrates the cell-type specific roles of NF-kB signaling pathway components (NF-kB1, IKKbeta, c-Rel, RelB) in CNS cells and immune cells, regulating inflammation, cell survival, and T cell differentiation.</p>
                                <p class="related"><strong>Related:</strong> Th1/Th2 differentiation; Th17 differentiation; Neuroinflammation</p>
                                <div class="counts">
                                    <span class="count-badge nodes">19 nodes</span>
                                    <span class="count-badge edges">21 edges</span>
                                </div>
                                <details class="data-table">
                                    <summary>Nodes (19)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                            <tbody><tr><td>NF-kB1</td><td>gene</td><td>4790</td><td>Astrocytes & Th2</td></tr><tr><td>IKKbeta</td><td>gene</td><td>3551</td><td>Microglia, Neurons</td></tr><tr><td>c-Rel</td><td>gene</td><td>5966</td><td>T cell differentiation</td></tr><tr><td>RelB</td><td>gene</td><td>5971</td><td>Oligodendrocytes</td></tr><tr><td>Pro-inflammatory cytokines</td><td>phenotype</td><td></td><td></td></tr><tr><td>Th0 cells</td><td>other</td><td></td><td>Precursor T cells</td></tr><tr><td>Th1 cells</td><td>phenotype</td><td></td><td></td></tr><tr><td>Th17 cells</td><td>phenotype</td><td></td><td></td></tr><tr><td>Treg cells</td><td>phenotype</td><td></td><td></td></tr><tr><td>Th2 cells</td><td>phenotype</td><td></td><td></td></tr><tr><td>...</td><td colspan="3"><em>+ 9 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                                <details class="data-table">
                                    <summary>Edges (21)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                            <tbody><tr><td>NF-kB1</td><td>Pro-inflammatory cytokines</td><td>activation</td><td></td></tr><tr><td>IKKbeta</td><td>Pro-inflammatory cytokines</td><td>activation</td><td></td></tr><tr><td>c-Rel</td><td>Th17 cells</td><td>activation</td><td></td></tr><tr><td>c-Rel</td><td>Treg cells</td><td>activation</td><td></td></tr><tr><td>RelB</td><td>Th1 cells</td><td>activation</td><td></td></tr><tr><td>NF-kB1</td><td>Th2 cells</td><td>activation</td><td></td></tr><tr><td>Th0 cells</td><td>Th1 cells</td><td>activation</td><td></td></tr><tr><td>B cells</td><td>T cells</td><td>indirect</td><td>?</td></tr><tr><td>...</td><td colspan="3"><em>+ 13 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audit-slide">
                    <div class="audit-card">
                        <div class="audit-header">
                            <h3>PMC4580081 — Figure F2</h3>
                            <span class="pathway-badge">JAK-STAT signaling</span>
                        </div>
                        <div class="audit-content">
                            <div class="audit-image">
                                <img src="images/PMC4580081__F2.jpg" alt="PMC4580081 F2">
                            </div>
                            <div class="audit-meta">
                                <p class="description">Chaperone-mediated life cycle of STAT3 and JAK kinases. Details the folding of STAT3 involving NAC, prefoldin, TRiC, and HSP90/ERp57, its activation by JAKs, and translocation to nucleus or mitochondria.</p>
                                <p class="related"><strong>Related:</strong> Protein folding; Ubiquitin-proteasome pathway</p>
                                <div class="counts">
                                    <span class="count-badge nodes">17 nodes</span>
                                    <span class="count-badge edges">19 edges</span>
                                </div>
                                <details class="data-table">
                                    <summary>Nodes (17)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                            <tbody><tr><td>IL-6</td><td>gene</td><td>3569</td><td></td></tr><tr><td>JAK1</td><td>gene</td><td>3716</td><td></td></tr><tr><td>JAK2</td><td>gene</td><td>3717</td><td></td></tr><tr><td>STAT3</td><td>gene</td><td>6774</td><td></td></tr><tr><td>HSP90</td><td>gene</td><td></td><td>Chaperone family</td></tr><tr><td>HOP</td><td>gene</td><td>10963</td><td>STIP1</td></tr><tr><td>ERp57</td><td>gene</td><td>2923</td><td>PDIA3</td></tr><tr><td>CDC37</td><td>gene</td><td>11140</td><td></td></tr><tr><td>TRiC</td><td>complex</td><td></td><td>Chaperonin</td></tr><tr><td>NAC</td><td>complex</td><td></td><td></td></tr><tr><td>prefoldin</td><td>complex</td><td></td><td></td></tr><tr><td>TOM</td><td>complex</td><td></td><td>Outer membrane</td></tr><tr><td>TIM</td><td>complex</td><td></td><td>Inner membrane</td></tr><tr><td>Proteasome</td><td>complex</td><td></td><td></td></tr><tr><td>HSP70</td><td>gene</td><td></td><td>Chaperone family</td></tr><tr><td>HSP40</td><td>gene</td><td></td><td>Chaperone family</td></tr><tr><td>Mitochondria</td><td>other</td><td></td><td>Organelle</td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                                <details class="data-table">
                                    <summary>Edges (19)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                            <tbody><tr><td>IL-6</td><td>JAK1</td><td>activation</td><td></td></tr><tr><td>IL-6</td><td>JAK2</td><td>activation</td><td></td></tr><tr><td>JAK1</td><td>STAT3</td><td>activation</td><td></td></tr><tr><td>JAK2</td><td>STAT3</td><td>activation</td><td></td></tr><tr><td>NAC</td><td>STAT3</td><td>activation</td><td>?</td></tr><tr><td>prefoldin</td><td>STAT3</td><td>activation</td><td>?</td></tr><tr><td>TRiC</td><td>STAT3</td><td>activation</td><td></td></tr><tr><td>HSP90</td><td>STAT3</td><td>binding</td><td></td></tr><tr><td>ERp57</td><td>STAT3</td><td>binding</td><td></td></tr><tr><td>STAT3</td><td>TOM</td><td>binding</td><td>?</td></tr><tr><td>STAT3</td><td>TIM</td><td>binding</td><td>?</td></tr><tr><td>CDC37</td><td>JAK1</td><td>binding</td><td></td></tr><tr><td>HSP90</td><td>JAK1</td><td>binding</td><td></td></tr><tr><td>Proteasome</td><td>JAK1</td><td>inhibition</td><td></td></tr><tr><td>...</td><td colspan="3"><em>+ 5 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audit-slide">
                    <div class="audit-card">
                        <div class="audit-header">
                            <h3>PMC7155770 — Figure F4</h3>
                            <span class="pathway-badge">Necroptosis signaling</span>
                        </div>
                        <div class="audit-content">
                            <div class="audit-image">
                                <img src="images/PMC7155770__F4.jpg" alt="PMC7155770 F4">
                            </div>
                            <div class="audit-meta">
                                <p class="description">TNF superfamily death receptor signaling pathways (TNFR1, CD95, TRAIL-R) leading to cell survival, apoptosis, or necroptosis. Details the formation of intracellular complexes (Complex I, IIa, IIb) and key regulators.</p>
                                <p class="related"><strong>Related:</strong> Apoptosis; NF-kB signaling; TNF signaling pathway</p>
                                <div class="counts">
                                    <span class="count-badge nodes">39 nodes</span>
                                    <span class="count-badge edges">25 edges</span>
                                </div>
                                <details class="data-table">
                                    <summary>Nodes (39)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                            <tbody><tr><td>TNFalpha</td><td>gene</td><td>7124</td><td></td></tr><tr><td>TNFR1</td><td>gene</td><td>7132</td><td></td></tr><tr><td>CD95L</td><td>gene</td><td>356</td><td>FASLG</td></tr><tr><td>TRAIL</td><td>gene</td><td>8743</td><td>TNFSF10</td></tr><tr><td>CD95</td><td>gene</td><td>355</td><td>FAS</td></tr><tr><td>FADD</td><td>gene</td><td>8772</td><td></td></tr><tr><td>Caspase-8</td><td>gene</td><td>841</td><td></td></tr><tr><td>RIPK1</td><td>gene</td><td>8737</td><td></td></tr><tr><td>RIPK3</td><td>gene</td><td>11035</td><td></td></tr><tr><td>MLKL</td><td>gene</td><td>197259</td><td></td></tr><tr><td>Apoptosis</td><td>phenotype</td><td></td><td></td></tr><tr><td>Necroptosis</td><td>phenotype</td><td></td><td></td></tr><tr><td>Survival</td><td>phenotype</td><td></td><td></td></tr><tr><td>...</td><td colspan="3"><em>+ 26 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                                <details class="data-table">
                                    <summary>Edges (25)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                            <tbody><tr><td>TNFalpha</td><td>TNFR1</td><td>binding</td><td></td></tr><tr><td>CD95L</td><td>CD95</td><td>binding</td><td></td></tr><tr><td>TRAIL</td><td>TRAIL R1/R2</td><td>binding</td><td></td></tr><tr><td>FADD</td><td>Caspase-8</td><td>binding</td><td></td></tr><tr><td>Caspase-8</td><td>Caspase-3/-7</td><td>activation</td><td></td></tr><tr><td>Caspase-3/-7</td><td>Apoptosis</td><td>activation</td><td></td></tr><tr><td>MLKL</td><td>Necroptosis</td><td>activation</td><td></td></tr><tr><td>p65</td><td>Survival</td><td>activation</td><td></td></tr><tr><td>...</td><td colspan="3"><em>+ 17 more</em></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audit-slide">
                    <div class="audit-card">
                        <div class="audit-header">
                            <h3>PMC5867880 — Figure F3</h3>
                            <span class="pathway-badge">Regulation of Cell Migration</span>
                        </div>
                        <div class="audit-content">
                            <div class="audit-image">
                                <img src="images/PMC5867880__F3.jpg" alt="PMC5867880 F3">
                            </div>
                            <div class="audit-meta">
                                <p class="description">CD99 signaling in cell migration. In CD99 wt cells, CD99 upregulates Caveolin-1, which inhibits Src, resulting in decreased ROCK2 and ARP2/3 levels and suppressed cell migration.</p>
                                <p class="related"><strong>Related:</strong> MAPK signaling; Src signaling</p>
                                <div class="counts">
                                    <span class="count-badge nodes">10 nodes</span>
                                    <span class="count-badge edges">12 edges</span>
                                </div>
                                <details class="data-table">
                                    <summary>Nodes (10)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                            <tbody><tr><td>CD99</td><td>gene</td><td>4267</td><td>Membrane</td></tr><tr><td>Cav-1</td><td>gene</td><td>857</td><td>Caveolin-1</td></tr><tr><td>Src</td><td>gene</td><td>6714</td><td></td></tr><tr><td>ARP2/3</td><td>complex</td><td></td><td>Actin complex</td></tr><tr><td>ROCK2</td><td>gene</td><td>9475</td><td></td></tr><tr><td>pJNK</td><td>gene</td><td></td><td>Phospho-JNK</td></tr><tr><td>ERK1/2</td><td>gene</td><td></td><td>MAPK3/1</td></tr><tr><td>AP1</td><td>complex</td><td></td><td>TF complex</td></tr><tr><td>MMP9</td><td>gene</td><td>4318</td><td></td></tr><tr><td>Cell migration</td><td>phenotype</td><td></td><td></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                                <details class="data-table">
                                    <summary>Edges (12)</summary>
                                    <div class="table-scroll">
                                        <table>
                                            <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                            <tbody><tr><td>CD99</td><td>Cav-1</td><td>activation</td><td></td></tr><tr><td>Cav-1</td><td>Src</td><td>inhibition</td><td></td></tr><tr><td>Src</td><td>ROCK2</td><td>activation</td><td></td></tr><tr><td>CD99</td><td>ARP2/3</td><td>inhibition</td><td></td></tr><tr><td>ARP2/3</td><td>Cell migration</td><td>activation</td><td></td></tr><tr><td>ROCK2</td><td>Cell migration</td><td>activation</td><td></td></tr><tr><td>Src</td><td>pJNK</td><td>activation</td><td></td></tr><tr><td>Src</td><td>ERK1/2</td><td>activation</td><td></td></tr><tr><td>pJNK</td><td>AP1</td><td>activation</td><td></td></tr><tr><td>ERK1/2</td><td>AP1</td><td>activation</td><td></td></tr><tr><td>AP1</td><td>MMP9</td><td>activation</td><td></td></tr><tr><td>MMP9</td><td>Cell migration</td><td>activation</td><td></td></tr></tbody>
                                        </table>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Same Pathway Audit -->
        <section>
            <h2>Audit: Same Pathway Comparison</h2>
            <p style="color:var(--muted);margin-bottom:1rem;">5 images all labeled as <strong>Autophagy</strong> from different papers. These show <strong>biological consensus</strong> — different researchers independently agreeing on core pathway components.</p>

            <!-- Consensus Summary Box -->
            <div style="background:#e8f5e9;border-left:4px solid #4CAF50;padding:1rem 1.5rem;margin-bottom:2rem;border-radius:0 8px 8px 0;">
                <strong style="color:#2e7d32;">10 genes shared by ALL 5 papers:</strong>
                <p style="margin:0.5rem 0 0;font-family:monospace;font-size:0.9rem;" id="shared-genes-list">Loading...</p>
            </div>

            <div class="audit-container" id="same-pathway-audit">
                <div class="audit-nav" id="audit-nav-buttons">
                    <!-- Buttons generated by JS -->
                </div>
                <div id="audit-slides-container">
                    <!-- Slides generated by JS -->
                </div>
            </div>

            <!-- Analysis Section -->
            <div style="margin-top:2rem;padding:1.5rem;background:white;border-radius:12px;box-shadow:0 1px 3px rgba(0,0,0,0.08);">
                <h3 style="margin-top:0;color:var(--text);">Similarities & Differences</h3>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1rem;">
                    <div>
                        <h4 style="color:#2e7d32;margin-bottom:0.5rem;">Consensus (Agreement)</h4>
                        <ul style="margin:0;padding-left:1.2rem;font-size:0.9rem;">
                            <li><strong>10 core genes</strong> in all 5 papers</li>
                            <li><strong>~50% average overlap</strong> (higher than Notch's 38%)</li>
                            <li><strong>ULK1 complex</strong>: ULK1, ATG13, FIP200, ATG101</li>
                            <li><strong>PI3K III complex</strong>: VPS34, VPS15, Beclin-1</li>
                            <li><strong>ATG conjugation</strong>: ATG3, ATG5, ATG7, ATG10, ATG12</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color:#c62828;margin-bottom:0.5rem;">Variation (Context-dependent)</h4>
                        <ul style="margin:0;padding-left:1.2rem;font-size:0.9rem;">
                            <li><strong>Regulatory focus</strong>: Some emphasize mTOR, others AMPK</li>
                            <li><strong>Phagophore → Autophagosome</strong>: "activation" vs "indirect"</li>
                            <li><strong>Unique genes</strong>: WIPI2 (PMC8888908), Bcl-2/Rab7 (PMC7272661)</li>
                            <li><strong>Naming variants</strong>: ATG16L vs ATG16L1 vs ATG16-1</li>
                        </ul>
                    </div>
                </div>

                <div style="margin-top:1.5rem;padding:1rem;background:#fff3e0;border-radius:8px;">
                    <strong style="color:#e65100;">Key Insight:</strong> Autophagy shows ~50% gene overlap — the highest consensus of any pathway we've analyzed. This reflects its status as a highly conserved, well-characterized cellular process.
                </div>
            </div>
        </section>

        <footer>
            <p><a href="/">← Back to Home</a></p>
            <p style="margin-top:0.5rem;font-style:italic;">Last updated: January 28, 2026</p>
        </footer>
    </div>

    <script>
        function showSlide(containerId, index) {
            const container = document.getElementById(containerId);
            const slides = container.querySelectorAll('.audit-slide');
            const buttons = container.querySelectorAll('.audit-nav-btn');

            slides.forEach((slide, i) => {
                slide.classList.toggle('active', i === index);
            });
            buttons.forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });
        }

        // Load and render Same Pathway Audit from JSON
        fetch('autophagy_audit.json')
            .then(r => r.json())
            .then(data => {
                // Update shared genes
                document.getElementById('shared-genes-list').textContent = data.shared_genes.join(', ');

                // Build nav buttons
                const navContainer = document.getElementById('audit-nav-buttons');
                const slidesContainer = document.getElementById('audit-slides-container');

                data.images.forEach((img, i) => {
                    // Nav button
                    const btn = document.createElement('button');
                    btn.className = 'audit-nav-btn' + (i === 0 ? ' active' : '');
                    btn.textContent = i + 1;
                    btn.onclick = () => showSlide('same-pathway-audit', i);
                    navContainer.appendChild(btn);

                    // Build node rows
                    const nodeRows = img.nodes.map(n =>
                        `<tr><td>${n.label || ''}</td><td>${n.node_type || ''}</td><td>${n.entrez_id || ''}</td><td>${n.notes || ''}</td></tr>`
                    ).join('');

                    // Build edge rows
                    const edgeRows = img.edges.map(e =>
                        `<tr><td>${e.source || ''}</td><td>${e.target || ''}</td><td>${e.interaction || ''}</td><td>${e.uncertain ? '?' : ''}</td></tr>`
                    ).join('');

                    // Slide HTML
                    const slide = document.createElement('div');
                    slide.className = 'audit-slide' + (i === 0 ? ' active' : '');
                    slide.innerHTML = `
                        <div class="audit-card">
                            <div class="audit-header">
                                <h3>${img.pmc} — Figure ${img.figure}</h3>
                                <span class="pathway-badge">${data.pathway}</span>
                            </div>
                            <div class="audit-content">
                                <div class="audit-image">
                                    <img src="images/${img.filename}" alt="${img.pmc} ${img.figure}">
                                </div>
                                <div class="audit-meta">
                                    <p class="description">${img.description}</p>
                                    <p class="related"><strong>Related:</strong> ${img.related}</p>
                                    <div class="counts">
                                        <span class="count-badge nodes">${img.nodes.length} nodes</span>
                                        <span class="count-badge edges">${img.edges.length} edges</span>
                                    </div>
                                    <details class="data-table">
                                        <summary>Nodes (${img.nodes.length})</summary>
                                        <div class="table-scroll">
                                            <table>
                                                <thead><tr><th>Label</th><th>Type</th><th>Entrez</th><th>Notes</th></tr></thead>
                                                <tbody>${nodeRows}</tbody>
                                            </table>
                                        </div>
                                    </details>
                                    <details class="data-table">
                                        <summary>Edges (${img.edges.length})</summary>
                                        <div class="table-scroll">
                                            <table>
                                                <thead><tr><th>Source</th><th>Target</th><th>Type</th><th>?</th></tr></thead>
                                                <tbody>${edgeRows}</tbody>
                                            </table>
                                        </div>
                                    </details>
                                </div>
                            </div>
                        </div>
                    `;
                    slidesContainer.appendChild(slide);
                });
            })
            .catch(err => console.error('Failed to load audit data:', err));
    </script>
</body>
</html>
